---
title: 'LangChain多知识库同时检索时filter不生效BUG的解决办法 Part2'
date: 2024-09-19
permalink: /cnposts/2024/09/blog-post-15/
tags:
  - Bug analysis
  - Code-sharing
---

昨天，通过在HTTP请求头Headers中携带参数的方法，解决了Langserve传参不生效的BUG。但是该方法的弊端在于——Headers信息在http请求中是明文发送的，会被其他人看到或是篡改。虽然这涉及不到一些核心内容，但是还是存在不安全因素和隐患。为此，今天深入研究了Langserve源码，研究在传递参数的时候，框架到底是如何处理的，并通过其他方法实现在post请求发送的data中携带参数，而非在headers中，增强了数据安全性。

具体地说，在add_routes后，langserve将chain封装为APIHandler类。在这个类中，实现了invoke等API接口。