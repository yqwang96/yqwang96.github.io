---
title: 'RLSK: A Job Scheduler for Federated Kubernetes Clusters based on Reinforcement Learning 学习笔记'
date: 2024-12-24
permalink: /cnposts/2024/12/blog-post-21/
tags:
  - Paper summary
---


在现代云计算领域，Kubernetes 已成为管理容器化应用的核心工具。然而，面对复杂的多集群环境，如何实现资源的高效调度和负载均衡仍然是一个巨大的挑战。该文章介绍了一种创新的基于深度强化学习的作业调度器——RLSK（Reinforcement Learning Scheduler for Kubernetes），它旨在通过智能化学习算法优化联邦 Kubernetes 集群的资源分配与调度。

[详细总结](https://yqwang96.github.io/files/blog_pdf/summary_RLSK_A_Job_Scheduler_for_Federated_Kubernetes_Clusters_based_on_Reinforcement_Learning.pdf)

---

## **1. 研究背景与意义**

随着云计算技术的普及，数据中心中运行的任务种类日益多样化。然而，批处理作业（Batch Jobs）仍占据了很大比例。在传统的资源管理问题中，调度算法通常依赖手动设计与调整，这种方式效率低下且不具备自适应能力。而强化学习作为一种动态优化工具，近年来被广泛应用于任务调度问题，例如解决作业依赖关系的任务调度和虚拟机资源配置等问题。

---

### **2. RLSK 的设计与实现**

RLSK 的目标是实现多集群环境下的自动化、动态化调度，核心设计包含以下几个部分：

### **2.1 系统架构**
RLSK 的整体架构采用中心化调度模式，通过与每个 Kubernetes 集群的主节点交互，收集各集群的资源使用状态，并根据训练后的模型做出调度决策。辅助模块被部署在 Kubernetes 的主节点中，用于数据采集和作业传递。

系统架构的关键部分包括：
- **数据采集**：通过 Kubernetes API，收集各节点的 CPU、内存等资源使用情况。
- **作业传递**：将调度决策下达给 Kubernetes 的内部调度器。
- **资源管理**：统一管理集群中的 Pod 和容器资源。

### **2.2 强化学习模型设计**
强化学习模型基于深度 Q 学习（Deep Q-Learning）进行训练，主要设计元素包括：
- **状态表示**：将系统的资源使用情况和待调度作业的信息编码为一维向量，方便模型学习。
- **动作定义**：定义调度动作为将作业分配至某一特定集群，或延迟作业调度以避免资源瓶颈。
- **奖励函数**：奖励函数综合考虑资源的整体利用率、集群间的负载平衡以及集群内部资源的均衡性，帮助模型在多重目标之间实现权衡。

### **2.3 训练过程**
训练过程中，RLSK 通过模拟不同的作业序列生成状态-动作-奖励样本，利用这些样本更新深度神经网络（DNN）模型。通过 ε-贪婪策略（ε-Greedy）平衡探索和利用，RLSK 能够逐渐收敛到最优调度策略。

---

## **3. 性能评估与对比分析**

为了验证 RLSK 的有效性，研究团队设计了一组模拟实验，与以下传统调度算法进行了对比：
- **最小负载优先（Least Load）**：选择负载最小的集群进行调度。
- **轮询调度（Round Robin）**：按顺序将作业分配到不同集群。
- **随机调度（Random）**：随机选择集群进行调度。
- **首次适配（First Fit）**：优先选择第一个满足需求的集群。

### **实验结果**
1. **资源利用率**：RLSK 显著提高了系统的整体资源利用率，同时实现了集群间和集群内部的资源均衡。
2. **奖励值变化**：RLSK 在训练初期表现较低，但在数十轮训练后超越了其他算法，获得更高的平均奖励。
3. **作业完成时间（Makespan）**：尽管 RLSK 的作业完成时间略高于最小负载优先算法，但其在资源平衡方面的表现远超其他算法。

---

## **4. 结论与未来展望**

RLSK 通过深度强化学习技术，成功实现了联邦 Kubernetes 集群的智能化调度，显著提升了资源利用率与调度效率。未来的改进方向包括：
- 引入更复杂的神经网络模型，进一步提升调度精度；
- 处理多任务依赖关系的调度问题；
- 扩展到更大规模的集群环境。

---

## **5. 研究价值**
RLSK 的提出为多集群环境下的资源调度问题提供了新思路，体现了强化学习在云计算领域的巨大潜力。这一技术的落地将有助于云服务提供商提升资源管理能力，为用户提供更加稳定、高效的计算服务。

